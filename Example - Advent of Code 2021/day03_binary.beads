beads 1 program "AOC Day 3 Binary"

const
	NDIGITS = 12 // 5

//===== INPUT DATA
var input : array of num = [ @+
/*...
0b00100
0b11110
0b10110
0b10111
0b10101
0b01111
0b00111
0b11100
0b10000
0b11001
0b00010
0b01010
....*/

0b011111101011
0b101001110000
0b010010001011
0b011111100101
0b111110100011
0b100000010101
0b001110110111
0b101101111100
0b001101110111
0b010101000101
0b010001001110
0b000010001111
0b011111001000
0b011011111011
0b001101110100
0b011101111010
0b000101000000
0b011010101111
0b010001010010
0b110010101001
0b100000011111
0b001100001011
0b011100001000
0b100101100111
0b111011101101
0b011001010100
0b011110010100
0b010001110001
0b111001101110
0b011001110011
0b101110111100
0b101101010110
0b111111100101
0b001011100100
0b101000111101
0b001101100000
0b101011011110
0b111110000111
0b101101010010
0b001110100100
0b110010010101
0b110000011000
0b000000000100
0b100101011110
0b010101110001
0b110111100111
0b110110100101
0b100110000001
0b001111000011
0b000100101000
0b001100111011
0b001011010011
0b000110111010
0b001110011100
0b100010001100
0b011010000001
0b011100001111
0b110111111101
0b011100110101
0b110111010010
0b010111001110
0b110100110101
0b010010011011
0b100111010000
0b011100000111
0b011100011100
0b100111000011
0b111111110001
0b111011001000
0b001111111011
0b011001000100
0b100110010010
0b000000100111
0b101011001010
0b111111101001
0b011100101011
0b101110001101
0b111111010100
0b100100000010
0b111100001011
0b110000011101
0b110111100110
0b011100010101
0b100111001101
0b101101100001
0b000101101101
0b001001001110
0b101001100000
0b101010110001
0b100001010101
0b100100001001
0b111101100001
0b100000010010
0b000001101010
0b000110100011
0b110011111100
0b111010101110
0b011110111000
0b101011110001
0b100100100001
0b000000011011
0b000100000010
0b101011010110
0b011001111111
0b101111010000
0b100001101011
0b110111000110
0b111000110001
0b100000000101
0b100010111011
0b010100011111
0b100000011101
0b110011000010
0b010111111001
0b011011101111
0b110011111110
0b111011010011
0b000011010100
0b111010100000
0b010100101010
0b101000000011
0b000101100000
0b111101100100
0b111101101101
0b010000111111
0b100001000001
0b000011010110
0b110001101001
0b110100011110
0b000100001000
0b110010100011
0b010000010001
0b000010000100
0b100001000000
0b111110100101
0b001100001111
0b001001010001
0b101011110000
0b101101001111
0b110001011110
0b100011011101
0b100000110100
0b110011000100
0b110101001000
0b100010010001
0b001011011010
0b111000101000
0b111000100100
0b001001100010
0b100100011111
0b011101101100
0b001011111001
0b111000001100
0b100001101010
0b101001111011
0b010101100111
0b010111100101
0b010000110110
0b010011001001
0b011000110110
0b000000101111
0b101110111000
0b100010100010
0b001101011100
0b010010001000
0b011011110010
0b001001100000
0b001110010010
0b011011100001
0b100101001110
0b000100001111
0b100100110001
0b100100111010
0b110000010110
0b110010011110
0b110100110000
0b111011011111
0b000100111001
0b010111110000
0b111001100001
0b001010011100
0b010000000110
0b110010010010
0b101000001001
0b100111000100
0b001001111011
0b111000111000
0b000110100010
0b100001101001
0b000100111101
0b111111110111
0b100001000010
0b000111000100
0b110101001111
0b111101011011
0b100101111110
0b010110111101
0b100010101111
0b111010111011
0b110000100101
0b100111011001
0b110110100111
0b010011000011
0b000011010010
0b100011011110
0b001000100101
0b001001111010
0b110011001111
0b101010100111
0b011111010000
0b110001011101
0b010010101110
0b110011111011
0b011011101011
0b111110001011
0b011001000001
0b101111000110
0b111100101110
0b011011001110
0b010011010001
0b000101011001
0b111100101010
0b010000100001
0b101010100100
0b110110011110
0b111000111110
0b100111001100
0b001000100001
0b110110110011
0b111110101111
0b011110111110
0b000101101110
0b000011111111
0b010101111000
0b010000001100
0b010111100001
0b111010110100
0b001110000001
0b101100101111
0b010110100001
0b011100000110
0b110001001000
0b100110101001
0b001000111010
0b101100000101
0b100110011101
0b011110101101
0b011100010100
0b000011100000
0b000011101111
0b100100000001
0b010001100100
0b001111000110
0b101001010110
0b000011101101
0b111110001100
0b101011101110
0b100001010110
0b111110110010
0b000101111111
0b000111101111
0b011000011001
0b101101000101
0b110110111001
0b111010011000
0b000100100110
0b001110011010
0b001001011000
0b101001011001
0b110111000001
0b000101110101
0b100001110101
0b110010100010
0b001000010011
0b000011000100
0b111100000000
0b011000100001
0b000111000110
0b010101011011
0b001110011011
0b110011101001
0b001111101001
0b010100100101
0b011111000100
0b010000011101
0b010101001100
0b001011010010
0b010001011100
0b011011010011
0b001000111101
0b011011101010
0b001010010001
0b010101011000
0b011110100000
0b010010001100
0b000010001011
0b000000001101
0b001111000001
0b100111001011
0b010000001111
0b010111111111
0b110000100100
0b110111001001
0b111010011101
0b001000000010
0b011110010000
0b111111111110
0b011011111111
0b110010110011
0b001100101111
0b101011101010
0b111111000011
0b101011000100
0b011001011000
0b111001000100
0b001011001100
0b011010001101
0b100100011100
0b111000101111
0b111010001001
0b100110000010
0b100011000110
0b001101011011
0b110000011011
0b010101010000
0b010100001000
0b000011010000
0b110110001110
0b111001001010
0b010011111111
0b010011110111
0b111100010100
0b110101101010
0b100100011001
0b111101011000
0b011000001011
0b101011100100
0b111011101100
0b011010011110
0b000100010111
0b010101100011
0b000001000000
0b001000110110
0b100000110110
0b000100101010
0b010111001111
0b100100010110
0b111000011100
0b111100010000
0b001100010100
0b010001011011
0b111101110110
0b100011111101
0b100001010010
0b011111101100
0b010110011110
0b111100011001
0b110110010110
0b110011011011
0b000100100010
0b111110110110
0b010110010110
0b000000111110
0b110010101000
0b011100100100
0b110011100000
0b001011100110
0b001000110111
0b010011001010
0b001011001110
0b100010010010
0b100011000100
0b110010111000
0b100010111000
0b111010000000
0b010101001110
0b110100010100
0b010011010110
0b111111000110
0b000110111001
0b001011000101
0b110111011001
0b101001101001
0b111001111111
0b111100000100
0b100100110100
0b110100000010
0b000100011011
0b100101000000
0b000000000111
0b101010100001
0b010011101000
0b101101101010
0b011011001111
0b000001111011
0b110100011001
0b111101100010
0b000001110101
0b110011000000
0b100101110111
0b101000100100
0b010110011011
0b001001101011
0b000100011010
0b011011000010
0b001111100000
0b101111000101
0b001101111010
0b010000101101
0b011100011011
0b011001011010
0b010010101101
0b100101101011
0b100111011101
0b111011001111
0b001010101011
0b111101011110
0b010100000111
0b001101011001
0b001101000101
0b101111000001
0b010100010000
0b011011111100
0b110101101011
0b000000011001
0b000000101101
0b101100010010
0b101110011101
0b001110010011
0b001011000111
0b111101001110
0b010101101010
0b001100010000
0b100101010101
0b111101110111
0b001101010001
0b111001100101
0b001101101101
0b111100101000
0b100001100011
0b011000011010
0b101111000111
0b101000010100
0b000011001001
0b111010101101
0b100110010100
0b011001111000
0b001001100110
0b010100110000
0b101100001010
0b111100100001
0b000110010000
0b100100000100
0b011100101000
0b100111101011
0b001111100001
0b111001011001
0b000000010101
0b011000010011
0b100111000010
0b000100001101
0b110100010110
0b001110001111
0b001101110010
0b110110101000
0b100111011010
0b011001110111
0b011111011111
0b101111111100
0b001100100110
0b101101111111
0b010000111101
0b010000000111
0b010110000100
0b111101001000
0b011101101110
0b010011011111
0b000000101100
0b101011100000
0b010111111010
0b111001011000
0b001000100110
0b110000001010
0b110101011011
0b101001010000
0b000000110110
0b000100101100
0b001000010010
0b101010010000
0b011100010001
0b001100101010
0b010110001010
0b011000100110
0b110001111010
0b100001011100
0b010001111010
0b111101010100
0b100001111010
0b000100011000
0b011110111100
0b111110010000
0b000011111100
0b001010101100
0b011100001101
0b101100001101
0b111010000111
0b001110100011
0b100001001110
0b110011001010
0b000101111110
0b111101010010
0b101000001110
0b001100111101
0b111110101010
0b001101001010
0b000011110011
0b000001010110
0b110111010110
0b110011111001
0b110111001110
0b011100111001
0b111101100011
0b010110001000
0b100100100101
0b111001110001
0b001101101011
0b111000101110
0b011000100010
0b001100001010
0b101001011101
0b101001000110
0b101001110100
0b100010010011
0b111011110011
0b011100111101
0b100110010000
0b111110001010
0b101011111010
0b101110101100
0b100010100000
0b110101001011
0b111001101111
0b101010110000
0b110011010110
0b101001110101
0b001011011100
0b111100011110
0b011000111110
0b011100111100
0b001101000011
0b101110010111
0b110011101110
0b001100011100
0b001100001000
0b010000010011
0b110011111000
0b101010001001
0b001001110110
0b111000000010
0b101110100110
0b010000000011
0b100100001000
0b000000101010
0b110000111010
0b000101110111
0b110101100011
0b010111101011
0b010110100100
0b011010100111
0b010110111100
0b011010011100
0b001110110100
0b010110100000
0b010010111100
0b001001100001
0b101010000001
0b100010101011
0b010011100010
0b110010001001
0b111110110101
0b111001100110
0b101010011101
0b000100110100
0b011000111100
0b000001011010
0b100100001010
0b110010001100
0b101111001101
0b011101101001
0b001011111101
0b101001011111
0b111011001110
0b001000010000
0b000000000011
0b011100100000
0b000101001010
0b100101100100
0b101000100101
0b101011111000
0b100101111010
0b100011110110
0b011110010011
0b101111110101
0b000000110000
0b111101011010
0b110001110001
0b100000001110
0b101101000000
0b110110010100
0b100011000111
0b011000000100
0b011010110110
0b100100001100
0b011000110001
0b000011010001
0b011010111111
0b011110001110
0b111111000000
0b000111011001
0b110100000100
0b110101000111
0b011001101010
0b010000100010
0b110010000100
0b011011001010
0b010100011000
0b111000100001
0b011001110010
0b011111010111
0b001000110001
0b110010011101
0b001110010001
0b001011011000
0b000111010000
0b010010011010
0b011110110110
0b010010000010
0b000000111000
0b101110101010
0b110111010001
0b010010000100
0b001110010100
0b101011110011
0b001000100100
0b110000110000
0b100011000101
0b000011100010
0b010101111100
0b110110110100
0b111110000100
0b011010110100
0b001111001111
0b101010111011
0b010010000001
0b001011101101
0b001001000011
0b000111100100
0b100111111000
0b011111001011
0b011110101001
0b101011101101
0b101110111011
0b111111101000
0b110000100011
0b011101010011
0b111100000111
0b011110101000
0b001000110101
0b110101111011
0b010101000001
0b110111011011
0b000100000101
0b011010010101
0b000111010010
0b100011001101
0b001011011011
0b001001111111
0b100100110010
0b101100101000
0b110111010011
0b111000011001
0b100000001111
0b001001111001
0b001010010000
0b011010011111
0b111100010001
0b010101001010
0b000100001011
0b011110000100
0b101101110101
0b011100001010
0b100110110110
0b001110111100
0b010010101010
0b000101011111
0b101101010111
0b100110100000
0b100110100001
0b010110010010
0b011010100010
0b101001110110
0b011110000111
0b001001010010
0b010011001101
0b011000011000
0b101001100011
0b011111100100
0b110111110111
0b010010110001
0b100111000111
0b100001100000
0b100101001001
0b001010110011
0b101111110010
0b111100101100
0b100011101111
0b010010111101
0b010001010101
0b100011001011
0b101111100010
0b101011010011
0b101111001000
0b111111111111
0b101001111101
0b011111110010
0b101111010010
0b011000000010
0b101110101101
0b011011100101
0b111110011111
0b110101110101
0b000001011110
0b110110110111
0b001001001000
0b000100111011
0b011101011111
0b101110000111
0b100011100100
0b011000110011
0b110100011111
0b101010001011
0b000000010011
0b110101010011
0b001101010000
0b011011010101
0b000101100110
0b100110001111
0b100011010101
0b111100101001
0b101111010001
0b000011001000
0b100110000111
0b101001111010
0b000110000110
0b010100101011
0b101011111100
0b000111000010
0b111000100111
0b110010101100
0b111000000100
0b101101000001
0b110101001110
0b001100100100
0b011000011111
0b000010111100
0b100010101010
0b000001011111
0b011001100001
0b010010000111
0b111100111010
0b110100011100
0b101000101111
0b010110001001
0b101111100110
0b101101110110
0b001010101000
0b000101110110
0b101101111001
0b110000001001
0b110101100000
0b011100110110
0b101110010101
0b111001101100
0b101000011011
0b011001010110
0b101111011110
0b001110101111
0b000100110110
0b101110100111
0b001010010100
0b001000000000
0b100100001110
0b101011000010
0b001011111011
0b011111100111
0b100001001100
0b000001101100
0b110001101101
0b010101001001
0b000000011110
0b010100111001
0b011111100010
0b011000010100
0b000001111101
0b011110011101
0b010001010111
0b001100110001
0b101111001010
0b100100010000
0b101011101011
0b011110001001
0b001101100011
0b010010100100
0b111010101010
0b011010100011
0b010100011010
0b001000000110
0b100011001100
0b011111000010
0b111011011101
0b111101010111
0b000101011110
0b101011101001
0b100111110001
0b000000011101
0b100010001010
0b000000010000
0b111001100100
0b101100111000
0b100011000010
0b010011010111
0b011110111101
0b111000110101
0b001000001001
0b111001100111
0b010001001010
0b011101110101
0b001111111111
0b000101001100
0b010011010000
0b000111111101
0b100101110100
0b110011110110
0b100110111101
0b011011101001
0b001111101111
0b110010001110
0b110100111101
0b001111101110
0b100110100100
0b010011001111
0b110001011000
0b100101110010
0b101101101100
0b001010111111
0b111000000111
0b110100101011
0b100100000000
0b100100111101
0b110110000000
0b110010010100
0b111100110000
0b101110001100
0b110001111100
0b111001100000
0b111011100011
0b100100011101
0b000111110111
0b011011000100
0b111001101000
0b000001011011
0b100000101101
0b100011010100
0b010111000000
0b011111001101
0b010000101011
0b110001010110
0b001101100111
0b111101111011
0b000100101001
0b000000100110
0b011011111110
0b001011010001
0b101110010010
0b010101101101
0b100111011011
0b100001111000
0b011110011011
0b001001110011
0b010100011011
0b001001110010
0b111101010101
0b010111011001
0b000001001110
0b010111010110
0b000000100000
0b000001101101
0b001110101000
0b100100101001
0b111100001010
0b110110101010
0b000101111000
0b011010100000
0b100111101111
0b110000110110
0b001001000111
0b100110101011
0b010011100000
0b010110011101
0b111110100111
0b110000000001
0b011101001101
0b101110100100
0b011110011010
0b000111001110
0b110100001100
0b110011011000
0b000001010010
0b011111010010
0b011111010101
0b000101110011
0b111001011111
0b001111110101
0b110111000011
0b001011101100
0b110010000000
0b100001011010
0b001111110111
0b111110011110
0b110111100001
0b001010000001
0b110111101110
0b001100000110
0b000110001001
0b110001101110
0b111110101001
0b111101101111
0b010110110100
0b100101011010
0b011111110110
0b001110111001
0b011000101110
0b010001010001
0b101000000000
0b001010000110
0b011110111001
0b010000001011
0b101110110101
0b100011011001
0b000100111000
0b011000111111
0b010010100010
0b101100110110
0b011001010101
0b111000001101
0b111101011101
0b111011010101
0b101100101110
0b100101010001
0b001011000001
0b101110111010
0b100010110100
0b010011001100
0b100001100110
0b000101010111
0b001110110010
0b100100010101
0b000100100000
0b100101101101
0b010101000011
0b000100011101
0b101000001100
0b111111101111
0b110000111011
0b001011100010
0b100100101100
0b011011100110
0b101010110101
0b000111110100
0b101111100100
0b001001111101
0b010000111000
0b000000101000
0b001000010111
0b001011010000
0b110010111011
0b100111101101
0b011100111011
0b101100101001
0b010010000011
0b100110001110
0b101000011100
0b010111001000
0b011111111001
0b010100111111
0b011000110111
0b000001100101
0b100101100010
0b001111110000
0b100000011011
	] @-

calc main_init
	const N_INPUT = tree_count(input)
	var gamma = 0
	var epsilon = 0
	var n_one
	var factor = 1

	loop reps:NDIGITS
		n_one = 0

		loop across:input index:ix val:n
			if is_odd(n)
				inc n_one
			input[ix] = input[ix] /. 2

		if n_one >= N_INPUT-n_one
			factor +=> gamma
		else
			factor +=> epsilon

		log "n_one={n_one}, N={N_INPUT}, factor={factor}"
		2 *=> factor

	log "gamma={to_str(gamma, base:2, zero_pad:Y, min:NDIGITS)}, ep={to_str(epsilon, base:2, zero_pad:Y, min:NDIGITS)}, tot={gamma*epsilon}"
			
